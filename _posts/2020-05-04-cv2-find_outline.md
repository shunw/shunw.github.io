---
layout: post
title: Find the Outline Properly
description: 
category: program
tags: [image, ML, cv2]
last_modified_at: 2020-05-04T00:00:00+00:00
---

æœºç¼˜å·§åˆï¼Œæœ€è¿‘è·Ÿç€PyImage çš„ Adriançš„Blogï¼Œå­¦ä¹ ä¸€äº›å›¾åƒå¤„ç†ã€‚ã€‚ã€‚å…¶ä¸­æˆ‘è§‰å¾—æ¯”è¾ƒæœ‰å…´è¶£çš„ä¸€ä¸ªæ–¹é¢æ˜¯å¦‚ä½•å¯¹ç…§ç‰‡ä¸­çš„å›¾åƒè¿›è¡Œ[é•¿å®½çš„æµ‹é‡](https://www.pyimagesearch.com/2016/03/28/measuring-size-of-objects-in-an-image-with-opencv/?__s=yo68x506yucrfbb1gtj5)ã€‚

## æŒ‰ç…§Adriançš„ç†å¿µæ˜¯ï¼š

- å°†æ ‡å‡†çš„å°ºå¯¸çš„ç‰©å“æ”¾åœ¨æœ€å·¦è¾¹/æœ€å³è¾¹
    
- æ‹ç…§
    
- å°†å›¾ä¸­çš„ç‰©å“çš„å¤–å½¢éƒ½æ‰¾å‡ºæ¥
    
- ç”¨ æ ‡å‡†å°ºå¯¸ç‰©å“ çš„ å®é™…é•¿å®½ å’Œ å›¾ä¸­çš„ é•¿å®½ è¿›è¡Œä¸€ä¸ªæ¯”è¾ƒï¼Œå¾—åˆ°ratio

- å¯¹å…¶ä»–ç‰©å“å¤„ç†ä»¥ç±»ä¼¼çš„ ratioï¼Œä»¥å¾—åˆ°å…¶å®é™…é•¿å®½

## è‡ªå·±çš„å®æ“é¢„æœŸ åŠ æ²¡æœ‰æ–™åˆ°çš„å‘ï¼š

- ç”»ä¸€ä¸ªçŸ©å½¢ï¼Œç„¶ååœ¨å››ä¸ªè§’ä¸Šç”»ä¸Š 10mm çš„æ­£æ–¹å½¢
    
    - å®Œæˆï¼Œè™½ç„¶ä¸å¤Ÿå®Œç¾

- æ‰¾å‡ºçŸ©å½¢å››ä¸ªç‚¹ï¼Œå¹¶å¯¹å…¶è¿›è¡Œ [top-down_view](https://www.pyimagesearch.com/2014/09/01/build-kick-ass-mobile-document-scanner-just-5-minutes/)çš„å¤„ç†
    
    - å®Œæˆ 

- æ‰¾å‡ºå››ä¸ªè§’ä¸Šçš„å®šä½ç‚¹

    - è¿›è¡Œing ğŸ‘ˆ

- å¯¹å››ä¸ªè§’ä¸Šçš„æ­£æ–¹å½¢è¿›è¡Œratioæ¯”è¾ƒï¼Œå¹¶åšå‡ºratioçš„è®¡ç®—

- å¯¹æ”¾åœ¨è¿™ä¸ªæ¡†é‡Œçš„ç‰©å“ï¼Œè¿›è¡Œé•¿å®½è®¡ç®—ï¼Œå¹¶å¯¹ç»“æœåšå‡ºerrorçš„è®¡ç®—

## å›¾1ï¼š(failed)

![æ­£æ–¹å½¢0_w_pencil](/assets/img/cv2/square_line.JPG)

- é“…ç¬”çš„é¢œè‰²å¤ªæµ…ï¼Œä¸èƒ½æ‰¾å‡ºçŸ©å½¢è¾¹ç•Œ

    - ç”¨æ°´ç¬”åŠ æ·±

## å›¾2ï¼š

![æ­£æ–¹å½¢_w_pen_filled_square](/assets/img/cv2/square_line_2.JPG)

- çŠ¶æ€ï¼š 

    - æˆåŠŸåˆ†è§£å‡ºçŸ©å½¢æ¡†

    - å‡†å¤‡æµ‹é‡å®šä½æ­£æ–¹å½¢

- mark: 
    
    - æŒ‰ç…§cv2.contourAreaè¿›è¡Œæ’åºï¼Œindex 2 ä¸ºå¤–åœˆçŸ©å½¢

    - ä¸‰ä¸ªæ­£æ–¹å½¢å®šä½è§’çš„index ä¾æ¬¡ä¸º 4, 5, 7

- ç°æœ‰é—®é¢˜ï¼š

    - å³ä¸‹è§’çš„å®šä½æ­£æ–¹å½¢ï¼Œå› ä¸ºå³ä¸‹è§’çš„çº¿ç•¥ç²—ï¼Œæ‰€ä»¥ ä»–ä»¬ä»¥ä¸ºæ˜¯ nè¾¹å½¢ï¼Œè€Œéå››è¾¹å½¢ã€‚index ä¸º 6

        - ? å¯ä»¥ç»§ç»­ç ”ç©¶ä¸‹ ğŸ‘ˆ


## å›¾3ï¼š

![æ­£æ–¹å½¢_w_pen_not_filled_square](/assets/img/cv2/square_line_not_fill.JPG)

- çŠ¶æ€ï¼š

    - æˆåŠŸåˆ†è§£å‡ºçŸ©å½¢æ¡†

    - å‡†å¤‡æµ‹é‡å®šä½æ­£æ–¹å½¢

- mark: 

    - æŒ‰ç…§cv2.contourAreaè¿›è¡Œæ’åºï¼Œindex 2 ä¸ºå¤–åœˆçŸ©å½¢
    

    


## é¢„æœŸçš„å‘ï¼š

- ç²¾åº¦ä¸å¤Ÿï¼Œå› ä¸ºæ‹ç…§çš„ä½ç½®çš„å…³ç³»ï¼Œå¯èƒ½æœ‰äº›åœ°æ–¹ä¼šæœ‰æ‹‰é•¿/ ç¼©çŸ­

## Wendy çš„ä¸ªäººå¿ƒå¾—ï¼š

- æ‰¾å‡ºedgeåˆæœŸæ­¥éª¤ï¼š

    - å¤„ç†æˆgrayï¼Œä¹‹åè¿›è¡Œ GaussianBlur

    - è¿›è¡ŒCanny å¤„ç†ï¼Œæ³¨æ„è®¾ç½®å¦¥å½“çš„thresholdâ—ï¸

    - Adrianæ²¡æœ‰è¿›è¡Œ edge dilateçš„å¤„ç†ï¼Œä½†æ˜¯æˆ‘å‘ç°ï¼Œå¦‚æœç”¨æˆ‘è‡ªå·±æ‹çš„å›¾ï¼Œä¸ºäº†æ‰¾å‡ºå¦¥å½“çš„è¾¹æ¡†ï¼Œè¿™ä¸€æ­¥ä¸èƒ½å°‘ï¼Œä¹Ÿä¸æ’é™¤æ˜¯å› ä¸ºæˆ‘æ‹çš„ç…§ç‰‡ä¸å¤Ÿå¥½

    ```py
    kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (5, 5))

    edged = cv2.dilate(edged, kernel)
    ```

- æ‰¾å‡º contourï¼Œ å¯ä»¥æœ‰çš„debug æ‰‹æ®µ
    
    - åŠ ä¸Š put Textï¼Œ å¯¹æ¯ä¸€ä¸ªcontourè¿›è¡Œæ ‡è¯†ï¼Œæˆ–è€…ä¸€ä¸ªä¸€ä¸ªçš„æ‰¾contourï¼Œå®æµ‹æŒºå¥½ç”¨ ğŸ‘

        - ä¸€ä¸ªä¸€ä¸ªç¡®è®¤çš„æ­¥éª¤ï¼Œè¯¦è§ open_cv_6_17_measure.py

        - å› ä¸ºcontsè¿”å›å€¼æ˜¯listï¼Œæ‰€ä»¥è¦å¯¹listè¿›è¡Œå¤„ç†ï¼Œå¤šä¸ªcontsçš„ï¼Œæ¯” å•ä¸ªcontsçš„ä¼šå¤šä¸€å±‚

- å»æ‰é‡å¤/ ç›¸ä¼¼çš„ contour 

    - è¯¦è§ open_cv_6_17_measure.py

    - å¯¹areaè¿›è¡Œæ’åº
    
    - cv2.boundingRect å¾—åˆ° x, y, weight, height
    
    - å¯¹å‰åçš„x, y, w, hè¿›è¡Œæ¯”è¾ƒ
    
    - è®¾ç½®thresholdï¼Œå¦‚æœx, y, w, hçš„å‰åæ¯”è¾ƒå€¼ å¤§äº .97ï¼Œåˆ™èˆå¼ƒè¯¥contour

- æ‰¾å››è¾¹å½¢

    - è¿˜æ˜¯éœ€è¦ Adrianä»‹ç»çš„æ¨¡å—æ²¡æœ‰ç”¨ä¸Šï¼Œå¯ä»¥è¯¦è§[é“¾æ¥](https://www.pyimagesearch.com/2014/09/01/build-kick-ass-mobile-document-scanner-just-5-minutes/)ï¼Œä»£ç 41è¡Œ - 51è¡Œ

- â“æœ‰æ—¶å› ä¸ºçº¿ç²—ç»†ä¸åŒ€ï¼Œå››è¾¹å½¢ä¼šè¢«è®¤ä¸ºæ˜¯nè¾¹å½¢ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ

## milestone1: 

ç»ˆäºä½œå‡ºè¿™ä¸ªå›¾äº†ï¼Œæ¿€åŠ¨çš„è¿‡æ¥çºªå¿µä¸€ä¸‹ã€‚

![çŸ©å½¢_outline_top_down_view](/assets/img/cv2/rec_outline_top_down.png)
